#!/bin/bash
echo "typescript..."
esbuild src/index.ts --bundle --minify --keep-names --sourcemap=external --format=esm --outdir=./lib/esm 
mv lib/esm/index.js lib/esm/index.mjs
esbuild src/index.ts --bundle --minify --keep-names --sourcemap=external --outdir=./lib/cjs --tsconfig=tsconfig.cjs.json

echo "types..."
#tsc -p tsconfig.types.json 
#tsc -p tsconfig.cjs.json

echo "files..."
mkdir -p lib/src
cp src/* lib/src
cp ./changelog.txt lib
cp ./README.md lib
cp ./license.md lib

echo "less..."
mkdir -p lib/styles 
lessc src/x4.less >lib/styles/x4.css 
cp src/x4.less lib/styles/x4.less

